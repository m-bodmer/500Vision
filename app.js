// Generated by CoffeeScript 1.6.1
(function(){$(document).ready(function(){var e,t,n,r,i,s,o;i=!1;s=1;t=function(e){return $.each(e,function(e,t){var n,r;r=t.image_url;n="<a href='http://www.500px.com/photo/"+t.id+"'><div class='item fade'>           <div class='caption'>              <div class='content'>                <h1>"+t.name+"</h1>                <h6>by "+t.user.fullname+"</h6>              </div>           </div>          <img data-src="+r+"  />          </div>        </a>";return $(".photos").append(n)})};r=function(e){return $.each(e,function(e,t){var n,r;r=t.image_url;n="<a href='http://www.500px.com/photo/"+t.id+"'><div class='item fade'>           <div class='caption'>              <div class='content'>                <h1>"+t.name+"</h1>                <h6>by "+t.user.fullname+"</h6>              </div>           </div>          <img src="+r+"  />          </div>        </a>";return $(".photos").append(n)})};e=function(){$("#editors_choice").click(function(){$(this).toggleClass("active");$("#popular").removeClass("active");return _500px.api("/photos",{feature:"editors",image_size:440,page:s},function(e){$(".photos").empty();t(e.data.photos);return $(".item img").unveil()})});$("#popular").click(function(){$(this).toggleClass("active");$("#editors_choice").removeClass("active");return _500px.api("/photos",{feature:"popular",image_size:440,page:s},function(e){$(".photos").empty();t(e.data.photos);return $(".item img").unveil()})});return $(window).scroll(function(){if(i===!1&&$(window).scrollTop()>$(document).height()-$(window).height()*2){i=!0;s++;console.log(s);return _500px.api("/photos",{feature:"popular",image_size:440,page:s},function(e){return r(e.data.photos)})}})};o=function(){$(document).on("dragstart",".photos .item",function(e){return e.preventDefault()});$(document).on("contextmenu",".photos .item img",function(e){return!1});$(document).on("mouseenter",".fade",function(e){var t;t=$(this).find(".caption");return t.fadeIn(250)});return $(document).on("mouseleave",".fade",function(e){var t;t=$(this).find(".caption");return t.fadeOut(250)})};n=function(){_500px.init({sdk_key:"e4671f3b61a876dfe887c5031b43d3dd900b63ce"});_500px.api("/photos",{feature:"popular",image_size:440,page:s},function(e){t(e.data.photos);return $(".item img").unveil()});e();return o()};return n()})}).call(this);